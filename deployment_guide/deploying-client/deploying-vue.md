# Deploying Vue on Amazon S3

[toc]

# Local

## Build

- Vue í”„ë¡œì íŠ¸ ê²½ë¡œì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ dist í´ë” ìƒì„±

    ```bash
    npm run build
    ```

- dist í´ë” ìƒì„± í™•ì¸

    ![images/Untitled.png](images/Untitled.png)



# Amazon S3

## ë²„í‚· ìƒì„±

1. ë²„í‚· ë§Œë“¤ê¸° ë²„íŠ¼ í´ë¦­

![images/Untitled%201.png](images/Untitled%201.png)

2. ë²„í‚· ì´ë¦„ ì‘ì„± & ë¦¬ì „ ì„ íƒ (ì•„ì‹œì•„ íƒœí‰ì–‘(ì„œìš¸))

![image-20210527011449353](images/image-20210527011449353.png)

3. (ìŠ¤í¬ë¡¤ ë‚´ë ¤ì„œ) í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ ì°¨ë‹¨ í•´ì œ ë° ë™ì˜ ë²„íŠ¼ ì²´í¬

![images/Untitled%203.png](images/Untitled%203.png)

4. ë°‘ìœ¼ë¡œ ë‚´ë ¤ì™€ì„œ ë²„í‚· ë§Œë“¤ê¸° í´ë¦­

![images/Untitled%204.png](images/Untitled%204.png)

5. ë²„í‚· ìƒì„± í™•ì¸

![images/image-20210527011652324.png](images/image-20210527011652324.png)

## íŒŒì¼ ì—…ë¡œë“œ

1. ë²„í‚·ëª… í´ë¦­
    ![image-20210527011652324](images/image-20210527011652324.png)

2. **dist "í´ë” ì•ˆì— ìˆëŠ” íŒŒì¼" ì „ì²´ drag & dropìœ¼ë¡œ ì—…ë¡œë“œ**

    > (ì£¼ì˜ ğŸš¨) dist í´ë” ìì²´ê°€ ì•„ë‹Œ **í´ë” ë‚´ë¶€ì˜ íŒŒì¼ë“¤**ì„ ì˜¬ë ¤ì•¼í•©ë‹ˆë‹¤.

    ![images/Untitled%207.png](images/Untitled%207.png)

3. í•˜ë‹¨ ì—…ë¡œë“œ ë²„íŠ¼ í´ë¦­

    ![images/Untitled%209.png](images/Untitled%209.png)

4. ì—…ë¡œë“œ ì„±ê³µ í™•ì¸ í›„ ìš°ì¸¡ ì¢…ë£Œ ë²„íŠ¼ í´ë¦­

    ![images/Untitled%2010.png](images/Untitled%2010.png)

## ì •ì  í˜¸ìŠ¤íŒ… ì„¤ì •

1. ì†ì„± íƒ­ í´ë¦­
    ![image-20210527012046945](images/image-20210527012046945.png)

2. ìµœí•˜ë‹¨ ì •ì  ì›¹ ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ì„¹ì…˜ì—ì„œ í¸ì§‘ í´ë¦­

    ![images/Untitled%2012.png](images/Untitled%2012.png)

3. í™œì„±í™” í´ë¦­ ë° ì¸ë±ìŠ¤ì™€ ì˜¤ë¥˜ ë¬¸ì„œì— ì•„ë˜ì™€ ê°™ì´ ê¸°ì… (index.html)

    ![images/Untitled%2013.png](images/Untitled%2013.png)

4. ë³€ê²½ ì‚¬í•­ ì €ì¥ í´ë¦­
5. ì •ì  ì›¹ ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ… ì„¹ì…˜ ë³€ê²½ í™•ì¸
    - ë²„í‚· ì›¹ ì‚¬ì´íŠ¸ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ (== Vue ì ‘ì† ì£¼ì†Œ)

    ![image-20210527012139962](images/image-20210527012139962.png)

6. ì—”ë“œí¬ì¸íŠ¸ë¡œ ì ‘ì† í›„ 403 ì—ëŸ¬ í™•ì¸

    ![images/Untitled%2015.png](images/Untitled%2015.png)

## ì •ì±… ì„¤ì •

1. ê¶Œí•œ íƒ­ í´ë¦­

    ![image-20210527012218085](images/image-20210527012218085.png)

2. ê¶Œí•œ ì„¹ì…˜ ë‚´ ë²„í‚· ì •ì±…íƒ­ì—ì„œ í¸ì§‘ ë²„íŠ¼ í´ë¦­

    ![images/Untitled%2017.png](images/Untitled%2017.png)

3. ì •ì±… ìƒì„±ê¸° ë²„íŠ¼ í´ë¦­

    ![images/Untitled%2018.png](images/Untitled%2018.png)

4. ì•„ë˜ ì‚¬ì§„ì˜ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ í¸ì§‘ í›„ Add Statement í´ë¦­

    ![image-20210527012606181](./images/image-20210527012606181.png)

5. ë‚´ìš© í™•ì¸ í›„ Generate Policy í´ë¦­

    ![image-20210527012628663](images/image-20210527012628663.png)

6. ëª¨ë‹¬ ì°½ ë‚´ë¶€ JSON ë‚´ìš© ë³µì‚¬ í›„ ì°½ ë‹«ê¸°
    ![image-20210527012659971](images/image-20210527012659971.png)

7. ë²„í‚· ì •ì±… í¸ì§‘ ì°½ìœ¼ë¡œ ëŒì•„ì™€ì„œ ë³µì‚¬í•œ ë‚´ìš© ë¶™ì—¬ë„£ê¸° í›„ ë³€ê²½ì‚¬í•­ ì €ì¥
    ![image-20210527012750122](images/image-20210527012750122.png)

8. ë¸Œë¼ìš°ì €ì—ì„œ ìœ„ì˜ **ë²„í‚· ì—”ë“œí¬ì¸íŠ¸ ì£¼ì†Œ**ë¡œ ì ‘ì† í›„ ì •ìƒ ë°°í¬ í™•ì¸ ğŸš€ğŸš€ğŸš€




# Client-Server ì—°ë™

## Server

- CORS whitelist ì¶”ê°€

    ```python
    CORS_ALLOWED_ORIGINS = [
        "S3 ë²„í‚· ì—”ë“œí¬ì¸íŠ¸ ì£¼ì†Œ",
    ]
    ```

## Client

- API ìš”ì²­ ì£¼ì†Œ ìˆ˜ì •

    (ì•„ë˜ ì½”ë“œëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤. ê° í”„ë¡œì íŠ¸ì˜ ìƒí™©ì— ë§ê²Œ ë°”ê¿”ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.)

    ```js
    const BASE_URL = 'http://ë°°í¬ëœ_ì„œë²„_ë„ë©”ì¸_ë˜ëŠ”_PUBLIC_IP'
    axios.get(`${BASE_URL}/api/movies/`)
    .then(..)
    .catch(...)
    ```